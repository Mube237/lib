function go() {
  // From http://www.unicode.org/Public/UNIDATA/EmojiSources.txt
  // Took out 2002/2003/2005 because they didn't look printable.
  var palette = ['❔','👈','👒','👣','✳','🍕','⚠','⬜','📶','🐥','🗼','💪','👋','🕖','⏰','🌸','♑','🏠','🔶','🏈','😹','👀','🙎','🎷','🔘','🎎','🚾','🔃','🍵','🗾','🍣','💾','👒','🌕','🎽','💖','💇','😘','🆚','🐚','🈚','🌀','💻','⁉','🚓','✋','🐲','📥','📮','📦','🏈','🐻','™','🈹','👢','🐚','💺','👨','🚀','👨','💗','🐝','📓','👸','🍊','💤','☺','⛅','❓','📍','👧','↖','🈚','🌟','🍕','🐺','🔦','👳','⬆','🍘','🍬','📈','❔','📂','🎌','👜','🎐','🔑','💴','😒','👪','🍠','⛺','📩','🍭','📼','🍀','🍜','⤵','🆒','♨','😤','🔻','🙇','🍫','🎍','📻','🎴','📹','🍮','🏧','💠','🈂','⛺','🕙','📱','👘','😽','🎺','🚫','🆘','🕚','🐜','♎','🏠','➗','🚽','❔','⚡','🔗','🍥','🍔','📟','👼','🏂','💪','🐑','💫','➡','🐰','💘','🍅','🌕','🚏','❄','👟','👙','💎','📼','👨','🍔','💸','↔','♦','🙏','♐','✨','🐸','👹','🐲','🔌','♎','〰','🎱','🌟','🐦','😢','🔮','🌔','✒','🕐','🐠','🆑','🚧','🔹','👾','🌀','🍪','👅','😄','🚥','📮','🌻','🎻','☺','📫','👫','⛪','➖','💎','✒','😷','✌','🎧','🐸','‼','🙈','🔊','🔝','📡','🛀','🌼','🍪','📫','😰','⁉','🌿','🕔','⛎','🔹','🚾','🔨','👎','⏬','👨','🏦','♨','✉','🔔','🐻','🌛','📈','🚨','🕕','😷','💺','🌱','🚨','📃','🎊','❔','🈚','🍢','😃','✖','💚','🅾','😔','🍤','👴','👺','🎿','🏁','😭','🍳','⏩','🔤','⌚','🍨','💼','👌','📝','🎶','🌁','🔪','✏','⌛','🈴','🐎','💜','💼','👼','🔲','🎧','🐙','🏭','👱','👪','👎','📔','📛','🚉','🍷','💠','🎲','‼','🎌','🈲','💂','⛵','🔼','🚹','😺','📟','🍇','🍓','🈯','🍃','🙎','🕖','🍚','🌾','🐺','🍄','🐶','🐡','👺','😆','🌟','😤','🆒','⛺','🐚','📅','🎯','🐘','🔵','🔢','📺','⚾','🍷','🍳','♑','▪','🏠','🌂','🍝','💌','😾','😾','🎉','🐹','😼','🔩','❇','🆚','🍩','💬','🍭','🐜','🛀','〽','🎵','🎄','🚨','💫','🍓','🚽','🎣','◼','🐗','🕒','📺','🌾','🙈','🆚','🗿','🐜','📣','🐧','🅾','🎅','©','💈','🕕','🐚','🏧','🎽','📛','🔱','㊙','💍','💕','😾','✒','↗','👷','💯','🐍','🐧','🈷','📑','🎅','💮','⭕','📈','👍','🙎','👂','🎨','👾','🔞','👒','🌓','😤','💞','⌚','👱','👕','✊','🔚','🐥','🌂','🐷','🍹','🔢','💘','🈚','🍡','📢','📃','🌷','🙏','🅰','👤','☺','🎦','👪','📛','🍵','⏪','🅱','❇','😜','😞','❇','💲','🍚','👆','☺','🐵','😢','💦','🌱','👑','💣','🈳','➡','🔳','↔','🎧','🍞','🍶','💹','↔','📙','🎎','🐸','🏊','🔤','🎡','✔','🚏','🍪','🌙','🍤','🙊','🎾','👊','👜','😱','🚗','🌰','📘','✉','👸','🚌','🍧','⛲','📕','🍹','🔩','🏪','🍮','🈶','🎥','🍆','🔏','🙏','🔍','🎁','🎃','😆','🆖','📜','🈹','🐘','😒','♊','😡','🏡','😥','🔍','🍱','🔤','♣','👔','🍲','👂','🔣','🉑','📤','🆎','↔','😲','🎂','🎁','🔴','🐥','⭐','⭕','📚','🌄','🌿','🕗','⛳','📇','♠','🔝','📜','🏪','🔫','🍹','🍘','❎','👂','🎒','🕓','💃','📃','🐦','👔','👴','💑','🆔','☺','💖','🕗','✌','🌓','↕','🈲','💓','⬆','❔','🚬','❤','👲','🎓','🚽','🍣','💕','👺','💨','🏦','🎥','🆗','ℹ','😻','🔷','📹','👗','😌','🉐','🔍','📉','🈺','🔎','↖','📕','🌇','📹','🌔','☀','⛳','↖','🐴','🎾','◀','⚡','🃏','↘','⛪','㊗','💂','🙊','🔣','😖','😷','✒','💱','🎏','☔','🏥','🔒','⛅','🚽','🎒','📹','🐻','📫','😖','🐺','💪','🎿','😏','➖','🕖','👈','😋','🏢','🍢','📌','👑','↘','🍰','🚚','💂','☑','✖','💚','🏂','🐵','😋','🔢','📣','‼','📦','😭','🐠','🎴','↗','✖','☀','🎉','🔛','🌇','🐝','♊','🆎','🐒','👤','💲','⏳','🎷','🔹','🚉','😓','🏊','🉐','📧','🔌','🍊','🍂','🎦','🌓','📠','🏪','😾','👷','🈶','🍃','▶','🎹','🎺','😭','💧','🍨','⭕','⤴','💟','🌉','🏢','📂','➕','💁','💀','🙌','♨','↙','📑','🎳','💣','🔡','✔','📖','🎼','⏬','👿','📂','🔍','💈','🐲','🚾','🎁','🐥','㊗','💇','⬜','🛀','💱','🍀','☁','🐹','💳','📄','🍦','🌹'];
  // If your editor freaks out and mishighlights this, it's ok. Emoji is hard.
  
  var emojiColorMap = [];

  var ctx = canvas.getContext('2d');
  ctx.font = '20px sans-serif';

  // For each emoji in the palette, paint it to the canvas and
  // then calculate its average colour.
  for (var i = 0; i < palette.length; i++) {
    // Paint it.
    ctx.clearRect(0, 0, 22, 22);
    ctx.fillText(palette[i], 0, 20);
    var rgb = getAverageColor(ctx.getImageData(0, 0, 22, 22));

    // Bam.
    emojiColorMap.push({
      color: [rgb.r, rgb.g, rgb.b],
      emoji: palette[i]
    });
  }

  console.log(JSON.stringify(emojiColorMap));
}

function getAverageColor(imageData) {
  var interval = 10;  // only look at every 10th pixel.
  var rgb = {r:0, g:0, b:0};
  var i = -4;
  var count = 0;

  while ( (i += interval * 4) < imageData.data.length ) {
    ++count;
    rgb.r += imageData.data[i];
    rgb.g += imageData.data[i+1];
    rgb.b += imageData.data[i+2];
  }

  // ~~ used to floor values
  rgb.r = ~~(rgb.r/count);
  rgb.g = ~~(rgb.g/count);
  rgb.b = ~~(rgb.b/count);

  return rgb;
}
